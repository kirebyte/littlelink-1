<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test i18n - Kitsuneando</title>
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/i18n.css">
  <script src="js/i18n.js" defer></script>
  <style>
    .test-container {
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
    }
    .test-section {
      margin: 20px 0;
      padding: 15px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 8px;
    }
    h2 {
      color: #fff;
      margin-bottom: 10px;
    }
    p {
      color: #ddd;
      line-height: 1.6;
    }
    .lang-info {
      padding: 10px;
      background: rgba(100, 200, 100, 0.2);
      border-radius: 5px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  
  <!-- Language Selector -->
  <div class="language-selector-wrapper">
    <select id="language-selector" class="language-selector" aria-label="Select language">
      <option value="en">English</option>
      <option value="es">Espa√±ol</option>
    </select>
  </div>

  <div class="test-container">
    <h1>üß™ Sistema de Internacionalizaci√≥n - Test</h1>
    
    <div class="test-section">
      <h2>‚úÖ Elementos Traducidos</h2>
      <p data-i18n="site.description">An open source DIY Linktree alternative.</p>
      <p data-i18n="button.kofi">Support me on Ko-fi</p>
      <p data-i18n="footer.privacy">Privacy Policy</p>
    </div>

    <div class="test-section">
      <h2>üåç Informaci√≥n del Idioma Actual</h2>
      <div class="lang-info">
        <p><strong>Idioma Actual:</strong> <span id="current-lang">-</span></p>
        <p><strong>Detectado desde:</strong> <span id="lang-source">-</span></p>
        <p><strong>Guardado en localStorage:</strong> <span id="lang-saved">-</span></p>
      </div>
    </div>

    <div class="test-section">
      <h2>üîß Controles de Prueba</h2>
      <button onclick="testChangeLanguage('en')" style="padding: 10px; margin: 5px; cursor: pointer;">
        Cambiar a English
      </button>
      <button onclick="testChangeLanguage('es')" style="padding: 10px; margin: 5px; cursor: pointer;">
        Cambiar a Espa√±ol
      </button>
      <button onclick="testClearStorage()" style="padding: 10px; margin: 5px; cursor: pointer;">
        Limpiar localStorage
      </button>
    </div>

    <div class="test-section">
      <h2>üìã Todas las Traducciones Disponibles</h2>
      <div id="translations-list"></div>
    </div>
  </div>

  <script>
    // Esperar a que i18n se inicialice
    window.addEventListener('load', () => {
      updateLangInfo();
      displayAllTranslations();
    });

    // Escuchar cambios de idioma
    window.addEventListener('languageChanged', (event) => {
      console.log('Idioma cambiado a:', event.detail.lang);
      updateLangInfo();
    });

    function updateLangInfo() {
      if (window.i18n) {
        document.getElementById('current-lang').textContent = window.i18n.currentLang.toUpperCase();
        document.getElementById('lang-saved').textContent = localStorage.getItem('preferred-language') || 'No guardado';
        
        const browserLang = navigator.language.toLowerCase().split('-')[0];
        document.getElementById('lang-source').textContent = 
          localStorage.getItem('preferred-language') ? 'localStorage' : 
          (browserLang === window.i18n.currentLang ? 'Navegador' : 'Predeterminado');
      }
    }

    function testChangeLanguage(lang) {
      if (window.i18n) {
        window.i18n.updateLanguage(lang);
        console.log('Idioma cambiado a:', lang);
      }
    }

    function testClearStorage() {
      localStorage.removeItem('preferred-language');
      alert('localStorage limpiado. Recarga la p√°gina para ver el efecto.');
      updateLangInfo();
    }

    function displayAllTranslations() {
      const container = document.getElementById('translations-list');
      const translations = {
        'Descripci√≥n del Sitio': 'site.description',
        'Amazon Wishlist': 'button.amazonWishlist',
        'Discord': 'button.discord',
        'Instagram': 'button.instagram',
        'Ko-fi': 'button.kofi',
        'OnlyFans': 'button.onlyfans',
        'PayPal': 'button.paypal',
        'Telegram': 'button.telegram',
        'TikTok': 'button.tiktok',
        'YouTube Music': 'button.youtubeMusic',
        'Pol√≠tica de Privacidad': 'footer.privacy',
        'Crea el tuyo': 'footer.buildYourOwn'
      };

      let html = '<ul style="list-style: none; padding: 0;">';
      for (const [name, key] of Object.entries(translations)) {
        html += `<li style="margin: 5px 0; padding: 5px; background: rgba(255,255,255,0.05); border-radius: 3px;">
          <strong>${name}:</strong> <code style="color: #4CAF50;">${key}</code>
        </li>`;
      }
      html += '</ul>';
      container.innerHTML = html;
    }
  </script>

</body>
</html>
